<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>[B√†i t·∫≠p] Tic tac toe</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        table {
            margin: auto;
            border-collapse: collapse;
        }

        td {
            width: 80px;
            height: 80px;
            text-align: center;
        }

        button {
            width: 100%;
            height: 100%;
            font-size: 24px;
            cursor: pointer;
            border: 2px solid black;
            background-color: white;
        }

        #result {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
            color: red;
        }
    </style>
</head>
<body>
<h1>[B√†i t·∫≠p] Tic tac toe</h1>
<h2>Game TIC TAC TOE</h2>
<p>Nh·∫≠p t√™n hai ng∆∞·ªùi ch∆°i: </p>
<input type="text" id="player1" placeholder="Ng∆∞·ªùi ch∆°i 1">
<input type="text" id="player2" placeholder="Ng∆∞·ªùi ch∆°i 2">
<input type="button" onclick="startGame()" value="B·∫Øt ƒë·∫ßu" style="margin-bottom: 30px"/>
<table>
    <tr>
        <td>
            <button onclick="makeMove(0, 0)"></button>
        </td>
        <td>
            <button onclick="makeMove(0, 1)"></button>
        </td>
        <td>
            <button onclick="makeMove(0, 2)"></button>
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="makeMove(1, 0)"></button>
        </td>
        <td>
            <button onclick="makeMove(1, 1)"></button>
        </td>
        <td>
            <button onclick="makeMove(1, 2)"></button>
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="makeMove(2, 0)"></button>
        </td>
        <td>
            <button onclick="makeMove(2, 1)"></button>
        </td>
        <td>
            <button onclick="makeMove(2, 2)"></button>
        </td>
    </tr>
</table>
<p id="result"></p>
<script>
    let board;
    let player1, player2;
    let currentPlayer, playerSymbol;
    let firstMovePlayer;
    let gameStarted = false;

    function startGame() {
        let p1 = document.getElementById("player1").value.trim();
        let p2 = document.getElementById("player2").value.trim();

        if (!p1 || !p2) {
            alert("Vui l√≤ng nh·∫≠p t√™n c·∫£ hai ng∆∞·ªùi ch∆°i!");
            return;
        }

        // N·∫øu ƒë√¢y l√† l·∫ßn ƒë·∫ßu ti√™n b·∫Øt ƒë·∫ßu, x√°c ƒë·ªãnh ai ƒëi tr∆∞·ªõc
        if (!player1 || !player2) {
            player1 = p1;
            player2 = p2;
            firstMovePlayer = (player1.toLowerCase() < player2.toLowerCase()) ? player1 : player2;
        } else {
            // ƒê·ªïi l∆∞·ª£t ƒëi tr∆∞·ªõc cho v√°n ti·∫øp theo
            firstMovePlayer = (firstMovePlayer === player1) ? player2 : player1;
        }

        currentPlayer = firstMovePlayer;
        playerSymbol = "X";

        board = [
            ["", "", ""],
            ["", "", ""],
            ["", "", ""]
        ];
        gameStarted = true;
        document.getElementById("result").innerText = `Ng∆∞·ªùi ch∆°i ƒëi tr∆∞·ªõc: ${currentPlayer} (X - ƒê·ªè)`;
        resetBoard();
    }

    function makeMove(row, col) {
        if (!gameStarted) {
            alert("Tr√≤ ch∆°i ch∆∞a b·∫Øt ƒë·∫ßu! Nh·∫•n 'B·∫Øt ƒë·∫ßu' ƒë·ªÉ ch∆°i.");
            return;
        }

        if (board[row][col] !== "") return;

        let btn = document.getElementsByTagName("table")[0].rows[row].cells[col].children[0];
        board[row][col] = playerSymbol;
        btn.innerText = playerSymbol;
        btn.style.color = (playerSymbol === "X") ? "red" : "blue";

        if (checkWinner()) {
            document.getElementById("result").innerText = `üéâ ${currentPlayer} th·∫Øng cu·ªôc!`;
            setTimeout(startGame, 2000); // X√≥a b√†n c·ªù v√† ch∆°i l·∫°i sau 2 gi√¢y
            return;
        }

        switchPlayer();
    }

    function switchPlayer() {
        currentPlayer = (currentPlayer === player1) ? player2 : player1;
        playerSymbol = (playerSymbol === "X") ? "O" : "X";
        document.getElementById("result").innerText = `L∆∞·ª£t c·ªßa: ${currentPlayer} (${playerSymbol})`;
    }

    function checkWinner() {
        let winPatterns = [
            [[0, 0], [0, 1], [0, 2]],
            [[1, 0], [1, 1], [1, 2]],
            [[2, 0], [2, 1], [2, 2]],
            [[0, 0], [1, 0], [2, 0]],
            [[0, 1], [1, 1], [2, 1]],
            [[0, 2], [1, 2], [2, 2]],
            [[0, 0], [1, 1], [2, 2]],
            [[0, 2], [1, 1], [2, 0]]
        ];

        for (let pattern of winPatterns) {
            let [a, b, c] = pattern;
            if (board[a[0]][a[1]] &&
                board[a[0]][a[1]] === board[b[0]][b[1]] &&
                board[a[0]][a[1]] === board[c[0]][c[1]]) {
                return true;
            }
        }
        return false;
    }

    function resetBoard() {
        let buttons = document.querySelectorAll("table button");
        buttons.forEach(button => {
            button.innerText = "";
            button.style.color = "black";
        });
    }
</script>
</body>
</html>